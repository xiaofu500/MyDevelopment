const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Index-KJ7mA8Pm.js",".pnpm-CbynJf5h.js","./rolldown-runtime-BvjVq7TH.js",".pnpm-Cb7Fgr0v.css","./Index-B-KZY8M3.css","./Index-C3lqOp3O.js","./Index-OfyzVZoo.css"])))=>i.map(i=>d[i]);
import{o as e}from"./rolldown-runtime-BvjVq7TH.js";import{A as t,B as i,C as a,Ct as s,D as n,E as o,Et as r,G as l,I as d,L as c,M as m,N as u,O as p,P as h,Q as v,R as w,S as g,St as f,Tt as y,V as x,W as b,X as k,Z as T,bt as D,dt as S,et as A,ft as _,gt as C,ht as I,i as E,it as L,j as V,k as M,lt as O,mt as N,nt as P,pt as j,q as B,r as z,rt as F,st as $,tt as G,ut as R,vt as W,wt as J,x as q,xt as Q,yt as Y}from"./.pnpm-CbynJf5h.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var H={};const X=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),o=n?.nonce||n?.getAttribute("nonce");s=t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,i),t in H)return;H[t]=!0;const a=t.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(i)for(let i=e.length-1;i>=0;i--){const s=e[i];if(s.href===t&&(!a||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const n=document.createElement("link");return n.rel=a?"stylesheet":"modulepreload",a||(n.as="script"),n.crossOrigin="",n.href=t,o&&n.setAttribute("nonce",o),document.head.appendChild(n),a?new Promise((e,i)=>{n.addEventListener("load",e),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),a=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};var U=[{path:"/",redirect:"/run",children:[{path:"/init",component:()=>X(()=>import("./Index-KJ7mA8Pm.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)},{path:"/run",component:()=>X(()=>import("./Index-C3lqOp3O.js"),__vite__mapDeps([5,1,2,3,6]),import.meta.url)}]}];const Z=v({history:T(),routes:U});var K={class:"applicationView"},ee=R({__name:"ApplicationView",setup:e=>(e,t)=>(j(),$("div",K,[O(s(k))]))}),te=class{static#e=this.sceneAnimationData={startTime:x.now(),endTime:x.addDays(x.now(),10,new x),speed:1};static init(e){this.viewer=e,this.sceneAnimationData.currentTime=this.viewer.clock.currentTime}static playSceneAnimation(e){const{startTime:t,endTime:i,speed:a,currentTime:s}=e;console.log("startTime",t,"endTime",i,"speed",a,"currentTime",s,this.viewer),this.viewer.clock.startTime=t,this.viewer.clock.stopTime=i,this.viewer.clock.currentTime=s,this.viewer.clock.multiplier=a,this.viewer.clock.shouldAnimate=!0}static stopSceneAnimation(){this.viewer.clock.shouldAnimate=!1}static backToStart(){this.viewer.clock.startTime=this.sceneAnimationData.startTime}static backToCurrentTime(){this.viewer.clock.currentTime=this.sceneAnimationData.currentTime}static backToEnd(){this.viewer.clock.stopTime=this.sceneAnimationData.endTime}static playFaster(e=2){this.viewer.clock.multiplier=this.sceneAnimationData.speed*e}static playSlower(e=.5){this.viewer.clock.multiplier=this.sceneAnimationData.speed*e}},ie=class{constructor(){this.animations=new Map}static#e=this.animations=new Map;static init(e){this.viewer=e,te.init(e)}static addAnimation(e,t){this.animations.set(e,t),this.addAnimationToDevice(t)}static deleteAnimation(e){const t=this.animations.get(e)?.device;t instanceof h?(t.availability=new M,t.position=new n,t.orientation=new n):t instanceof c&&(t.modelMatrix=new p(b)),this.animations.delete(e)}static changeDeviceSpeed(e,t){let i=this.animations.get(e);if(!i)return;let{startTime:a,endTime:s}=i,n=x.secondsDifference(s,a);i.endTime=x.addSeconds(a,n/t,new x),this.addAnimationToDevice(i)}static getAnimation(e){return this.animations.get(e)}static addAnimationToDevice(e){const{description:t,startTime:a,endTime:s,device:r}=e,c=e.path.length-1;if(c<0)return;const m=c>0?x.secondsDifference(s,a)/c:0;if(console.log(t,"动画设置"),r instanceof h)r.availability instanceof M||(r.availability=new M),r.position instanceof n||(r.position=new n),r.orientation instanceof n||(r.orientation=new n),e.path.forEach((e,t)=>{r.position.addSample(x.addSeconds(a,m*t,new x),e.position);const i=new o(r.position);r.orientation.addSample(x.addSeconds(a,m*t,new x),i)});else{const t=new p(b);e.path.forEach((e,s)=>{const n=i.fromHeadingPitchRoll(e.hdr),o=b.fromTranslationRotationScale(new d(e.position,n,new l(1,1,1)));t.addSample(x.addSeconds(a,m*s,new x),o),console.log("基元动画可能报错"),r.modelMatrix=t})}r instanceof h&&(r.availability.addInterval(new w({start:a,stop:s})),console.log(t,"动画设置"))}},ae=class{static addImageryLayer(e){const{name:t,url:i,layerOrder:a}=e,s=new m({url:i,layers:t,parameters:{transparent:!0,format:"image/jpeg"}}),n=new V(s);this.viewer.imageryLayers.add(n,a)}static async add3DTilesLayer(e){const{name:i,url:a,layerOrder:s}=e;try{const e=await t.fromUrl(a,{enableCollision:!0});this.viewer.scene.primitives.add(e),this.viewer.flyTo(e)}catch(n){console.error(`Error creating tileset: ${n}`)}}};let se=function(e){return e.wms="wms",e.wmts="wmts",e.tileset="tileset",e.arcgis="arcgis",e}({});var ne=class{static async initViewer(e){u.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0OTIwNzY2YS0wOWIyLTQ2ZWYtODM3MC04Mzc1NzQ0ZjJkMTAiLCJpZCI6MjM3MjAwLCJpYXQiOjE3NTI3MTk2NzV9.8FjoYqy_FFFAXQ2M8i3V76m-dQv3jxyEpNYBH0x-SRg",this.viewer=new a(e,{shouldAnimate:!0,animation:!1,selectionIndicator:!1,infoBox:!1,homeButton:!0,fullscreenButton:!1,timeline:!0,sceneModePicker:!0,navigationHelpButton:!1,geocoder:!1,requestRenderMode:!0}),ae.viewer=this.viewer,ie.init(this.viewer)}static addLayer(e){const{name:t,url:i,layerOrder:a,type:s}=e;switch(s){case se.wms:case se.wmts:ae.addImageryLayer({name:t,url:i,layerOrder:a});break;case se.tileset:ae.add3DTilesLayer({name:t,url:i,layerOrder:a})}}},oe=(e,t)=>{const i=e.__vccOpts||e;for(const[a,s]of t)i[a]=s;return i},re={class:"container"},le={class:"menu-bar"},de=["onClick"],ce={class:"popup-header"},me={class:"group-header"},ue={class:"group-content"},pe=["onClick"],he={class:"thumbnail-img"},ve=["src"],we={class:"thumbnail-text"},ge=oe({__name:"index",setup(e){const t=f(""),i=f(""),a=f("场景库"),s=Q([{id:"scene",text:"场景库",popup:"scene",content:"场景库"},{id:"model",text:"模型库",popup:"model",content:"模型库"},{id:"area",text:"区域标记",popup:"area",content:"区域标记"},{id:"camera",text:"摄像头库",popup:"camera",content:"摄像头库"},{id:"event",text:"事件管理",popup:"event",content:"事件管理"}]),n=Q({scene:{id:"scene",text:"场景库",groups:[{id:"trainingA",text:"训练场A",items:[{id:1,text:"大雁塔景区",url:"dyt.png"},{id:2,text:"海南某工厂",url:"hainan.png"},{id:3,text:"倾斜摄影C"}]},{id:"trainingB",text:"训练场B",items:[{id:4,text:"通用模型1"},{id:5,text:"通用模型2"}]}]},model:{id:"model",text:"模型库",groups:[{id:"basic",text:"设施",items:[{id:1,text:"直升飞机",url:"helicopter.png"},{id:2,text:"基地"}]},{id:"advanced",text:"人员",items:[{id:6,text:"医护人员",url:"doctor.png"},{id:5,text:"伤患人员"}]},{id:"advanced1",text:"装备",items:[{id:5,text:"救护车1",url:"ambulance.png"},{id:6,text:"救护车2"}]}]},area:{id:"area",text:"区域标记",groups:[{id:"markType",text:"区域标记",items:[{id:1,text:"点标记"},{id:2,text:"线标记"},{id:3,text:"面标记"}]}]},camera:{id:"camera",text:"摄像头库",groups:[{id:"cameraList",text:"在线摄像头",items:[{id:1,text:"大门摄像头"},{id:2,text:"急症室摄像头"},{id:3,text:"走廊摄像头"}]}]},event:{id:"event",text:"事件管理",groups:[{id:"eventType",text:"事件类型",items:[{id:1,text:"类型A"},{id:2,text:"类型B"},{id:3,text:"类型C"},{id:4,text:"类型D"}]},{id:"eventRecord",text:"事件记录",items:[{id:5,text:"记录1"},{id:6,text:"记录2"}]}]}}),o=()=>{i.value=null};return(e,l)=>(j(),$("div",re,[L("div",le,[(j(!0),$(P,null,N(s,e=>(j(),$("div",{key:e.id,class:J(["menu-item",{active:t.value===e.id}]),onClick:s=>(e=>{t.value=e.id,i.value=e.popup,a.value=e.content})(e)},r(e.text),11,de))),128))]),(j(!0),$(P,null,N(n,e=>(j(),$("div",{key:e.id,class:J(["popup",{active:i.value===e.id}])},[L("button",{class:"close-btn",onClick:o},"×"),L("div",ce,r(e.text),1),(j(!0),$(P,null,N(e.groups,e=>(j(),$("div",{key:e.id,class:"group"},[L("div",me,[L("span",null,r(e.text)+" ("+r(e.items.length)+")",1)]),L("div",ue,[(j(!0),$(P,null,N(e.items,e=>(j(),$("div",{key:e.id,class:"thumbnail",onClick:t=>(e=>{switch(e.text){case"大雁塔景区":ae.add3DTilesLayer({name:"",url:"http://earthsdk.com/v/last/Apps/assets/dayanta/tileset.json",layerOrder:""});break;case"海南某工厂":ae.add3DTilesLayer({name:"",url:"http://61.182.25.62:8081/gisData/MAKJC/OSGB/QXMX/tileset.json",layerOrder:""});break;case"直升飞机":const e=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.5,34.5,0),model:{uri:"/models/helicopter.glb",scale:1}});viewer.zoomTo(e);break;case"医护人员":const t=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.6,34.6,0),model:{uri:"/models/doctor.glb",scale:1}});viewer.zoomTo(t);break;case"救护车1":const i=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.7,34.7,0),model:{uri:"/models/ambulance.glb",scale:1}});viewer.zoomTo(i)}})(e)},[D(L("div",he,[L("img",{src:`/src/assets/static/${e.url}`,style:{width:"100%"}},null,8,ve)],512),[[G,e.url]]),D(L("div",{class:"thumbnail-img"},r(e.text),513),[[G,!e.url]]),L("div",we,r(e.text),1)],8,pe))),128))])]))),128))],2))),128))]))}},[["__scopeId","data-v-63abd232"]]),fe={class:"my-header"},ye={class:"my-header-title"},xe={class:"my-header-title-text"},be={__name:"CommonPanel",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"面板"},width:{type:[String,Number],default:"300px"},height:{type:[String,Number],default:"437px"},top:{type:[String,Number],default:void 0},left:{type:[String,Number],default:void 0},right:{type:[String,Number],default:void 0},bottom:{type:[String,Number],default:void 0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const i=e,a=t,s=f(i.modelValue);function n(){s.value=!1,a("update:modelValue",!1),a("close")}W(()=>i.modelValue,e=>s.value=e),W(s,e=>a("update:modelValue",e));const o=(e,t="vw")=>{return i=e,!isNaN(parseFloat(i))&&isFinite(i)?"vw"===t?parseFloat(e)/1920*100+"vw":(e=>parseFloat(e)/1080*100+"vh")(e):("string"==typeof e&&e.endsWith("px"),e);var i},l=F(()=>{const e={position:"absolute",zIndex:1e3,opacity:1,background:"rgba(23, 65, 75, 1)",border:"1px solid rgba(31, 155, 170, 1)",width:o(i.width,"vw"),height:o(i.height,"vh")};return void 0!==i.top&&(e.top=o(i.top,"vh")),void 0!==i.left&&(e.left=o(i.left,"vw")),void 0!==i.right&&(e.right=o(i.right,"vw")),void 0!==i.bottom&&(e.bottom=o(i.bottom,"vh")),e});return(t,i)=>{const a=C("el-icon");return D((j(),$("div",{class:"common-panel-wrapper",style:y(l.value)},[L("div",fe,[L("div",ye,[i[0]||(i[0]=L("div",{class:"my-header-title-icon"},null,-1)),L("span",xe,r(e.title),1)]),L("div",{class:"my-header-close",onClick:n},[O(a,{class:"el-icon--left"})])]),I(t.$slots,"default")],4)),[[G,s.value]])}}};const ke=new(e(q(),1).BaseClass);var Te={style:{height:"400px",padding:"20px"}},De=oe({__name:"TimeGantt",setup(e){const t=f(!1),i={showAvatar:!1,showTitle:!0,showProgress:!1,dragThreshold:8,resizeHandleWidth:8,enableDragDelay:!0,dragDelayTime:200},a={columns:[{key:"name",label:"任务名称",width:100,visible:!1},{key:"startDate",label:"开始时间",visible:!0},{key:"endDate",label:"结束时间",visible:!0}],defaultWidth:580,minWidth:100,maxWidth:1200,showAllColumns:!1},n={showAddTask:!0,showAddMilestone:!1,showTodayLocate:!0,showExportCsv:!0,showExportPdf:!0,showLanguage:!0,showTheme:!0,showFullscreen:!0,showTimeScale:!0,timeScaleDimensions:["hour","day","week"],defaultTimeScale:"hour",showExpandCollapse:!0};function o(e){const t=new Date(Date.now()+60*e*1e3);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}const r=f([]);let l=f(""),d=f("");return ke.on("setTimeGantt",function(e){localStorage.setItem("gantt-theme","dark");let i=e.data||{};l.value=o(0);let a=0,s=[];for(let t in i){let e={chessPieceId:"",markGridsVos:[]},n=i[t]||[],r=0,l=o(r),d=[];n.forEach(t=>{e.chessPieceId=t.operationDeploymentId,e.markGridsVos.push(...t.markGridsVos);let i=Number(t.executionTime)||10,s=o(r);a+=i,r+=i;let n=o(r),l=t.markGridsVos||[],c="";l.length>0&&(c=l[0].id);let m={id:t.id,name:c,startDate:s,endDate:n,progress:100,color:"#00ff00"};d.push(m)}),(void 0)(e);let c={id:t,name:t,startDate:l,endDate:o(r),progress:100,color:"#ff0000",children:d};s.push(c)}r.value=s,d.value=o(a),console.log(r.value),t.value=!0}),_(()=>{}),(e,t)=>(j(),$("div",Te,[O(s(g),{"task-list-config":a,"task-bar-config":i,"toolbar-config":n,useDefaultDrawer:!0,tasks:r.value},null,8,["tasks"])]))}},[["__scopeId","data-v-a9133be3"]]),Se={class:"op-btn"},Ae=oe(R({__name:"CesiumSDk",setup(e){const t=f(!0),i=f();function a(){i.value&&(i.value.style.width=window.innerWidth+"px",i.value.style.height=window.innerHeight+"px")}return _(()=>{ne.initViewer(i.value)}),S(()=>{window.removeEventListener("resize",a)}),(e,a)=>(j(),$(P,null,[L("div",{id:"cesium-sdk",ref_key:"cesiumSdk",ref:i},null,512),O(ge),O(be,{left:20,bottom:20,width:"96vw",height:400,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),title:"事件管理"},{default:Y(()=>[O(De)]),_:1},8,["modelValue"]),L("div",Se,[L("div",{onClick:a[1]||(a[1]=e=>t.value=!t.value),class:"my-header-title-icon moresmsg-btn"})])],64))}}),[["__scopeId","data-v-63106c9b"]]),_e={class:"app"},Ce=A(R({__name:"App",setup:e=>(e,t)=>(j(),$("div",_e,[O(Ae),O(ee)]))}));Ce.use(Z);var Ie=B();Ce.use(Ie),Ce.use(E,{locale:z}),Ce.mount("#app");export{ne as n,oe as t};