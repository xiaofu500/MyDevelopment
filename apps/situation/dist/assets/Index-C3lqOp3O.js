import{o as e}from"./rolldown-runtime-BvjVq7TH.js";import{Ct as t,Et as i,F as s,G as a,H as o,K as n,St as l,T as r,U as c,b as u,c as d,ct as m,it as h,lt as p,mt as v,nt as g,o as C,pt as f,s as w,st as L,t as _,ut as F,vt as P,w as b,yt as k}from"./.pnpm-CbynJf5h.js";import{n as y,t as I}from"./index-ikMLDb6-.js";let x=function(e){return e.screenPosition="screenPosition",e.WGS84="WGS84",e.localPosition="localPosition",e}({});var S=class{constructor(e,t=x.WGS84){this.viewer=e,this.type=t}startLeftCilck(e){this.hander=new b(this.viewer.scene.canvas),this.hander.setInputAction(t=>{const i=this.viewer.scene.pickPosition(t.position);if(i){const t=o.fromCartesian(i),s=n.toDegrees(t.longitude),a=n.toDegrees(t.latitude),l=t.height;e({longitude:s,latitude:a,height:l})}else alert("未拾取到坐标")},r.LEFT_CLICK)}endDobuleLeftClick(){this.hander.setInputAction(()=>{this.destroyedClick()},r.LEFT_DOUBLE_CLICK)}destroyedClick(){this.hander&&(this.hander.removeInputAction(r.LEFT_CLICK),this.hander.removeInputAction(r.LEFT_DOUBLE_CLICK),this.positions=[],this.type=x.WGS84,this.hander=null)}getLocalPositionsFromType(e){switch(e){case x.screenPosition:return this.getScreenPositionFromCartesian2();case x.WGS84:return this.getCartographicFromCartesian3();case x.localPosition:return this.getLocalPositionFromCartesian3()}}getCartographicFromCartesian3(){if(0===this.positions.filter(e=>e.x&&e.y&&e.z).length)return[];const e=this.positions.map(e=>o.fromCartesian(e));return this.positions=[],e}getScreenPositionFromCartesian2(){return this.positions.map(e=>e)}getLocalPositionFromCartesian3(){if(this.type!==x.localPosition)return[]}getLocalPositionFromCartographic(){return this.positions.map(e=>e)}getLocalPositionFromCartesian2(){return this.positions.map(e=>e)}cartesianToWGS84(e){const t=o.fromCartesian(e);return{longitude:_(t.longitude),latitude:_(t.latitude),height:t.height}}getCartesian3FromCartesian2(e){return new a(e.x,e.y,0)}},T={class:"object-management"},E={class:"title"},G={class:"organizer"},V={class:"organizer-title"},A={class:"element"},D={class:"element-title"},W={class:"el-list-btn"},j=["onClick"],z=["onClick"],K=I(F({__name:"ObjectManagemen",setup(e){const o=l("");P(o,(e,t)=>{e!==t&&u(()=>{console.log(e,t)},200),console.log(e,t)});const n=l("");P(n,(e,t)=>{e!==t&&(_.value=r.filter(t=>t.name.includes(e)))});const r=[{name:"军用车辆",uri:"GroundVehicle.glb"},{name:"飞机",uri:"Cesium_Air.glb"}],_=l(r),F=l([]),b=()=>{new S(y.viewer).startLeftCilck(e=>{F.value.push(e),console.log(F.value)})},I=e=>{y.viewer.entities.removeAll(),F.value.forEach((t,i)=>{t&&(({viewer:e,position:t,uri:i="/public/models/CesiumMilkTruck.glb",id:o})=>{const n=t instanceof a?t:new a(t.x,t.y,t.z),l=e.entities.add({id:o,position:n,model:new s({show:!0,uri:i,scale:1})});e.flyTo(l)})({id:"entity"+c(),viewer:y.viewer,uri:e,position:a.fromDegrees(t.longitude,t.latitude,t.height)})}),F.value=[]};return(e,s)=>(f(),L("div",T,[h("div",E,[s[3]||(s[3]=m("对象管理 ",-1)),p(t(C),{onClick:b},{default:k(()=>[...s[2]||(s[2]=[m("点位拾取",-1)])]),_:1})]),h("div",G,[h("div",V,[s[4]||(s[4]=h("div",{class:"title-text"},"编组",-1)),p(t(d),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=e=>o.value=e),placeholder:"搜索编组"},null,8,["modelValue"])]),s[5]||(s[5]=h("div",{class:"organizer-container"},null,-1))]),h("div",A,[h("div",D,[s[6]||(s[6]=h("div",{class:"title-text"},"元素",-1)),p(t(d),{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=e=>n.value=e),placeholder:"搜索元素"},null,8,["modelValue"])]),p(t(w),{class:"element-container","max-height":"400px"},{default:k(()=>[(f(!0),L(g,null,v(_.value,e=>(f(),L("div",{class:"el-list",key:e.name},[h("div",null,i(e.name),1),h("div",W,[h("div",{class:"btn",onClick:t=>(e=>{console.log(e)})(e.name)},"信息",8,j),s[7]||(s[7]=m(" | ",-1)),h("div",{class:"btn",onClick:t=>(e=>{const t=r.find(t=>t.name===e);t&&I(`/public/models/${t.uri}`)})(e.name)},"定位",8,z)])]))),128))]),_:1})])]))}}),[["__scopeId","data-v-582a757c"]]),U={class:"page2-view"},O=I(F({__name:"Index",setup:e=>(e,t)=>(f(),L("div",U,[p(K)]))}),[["__scopeId","data-v-1823eb6b"]]);export{O as default};